{
  "name": "@saf-2025/deploy-instance",
  "scripts": {
    "dev": "docker compose --env-file .env.dev -f docker-compose.base.yaml -f docker-compose.dev.yaml up --watch",
    "test": "docker compose --env-file .env.test -f docker-compose.base.yaml -f docker-compose.test.yaml up",
    "prod-local": "cd ./remote-assets && docker compose --env-file ../.env.prod-local -f docker-compose.prod.yaml up",
    
    "exec-remote": "source .env.remote && ssh $SSH_HOSTNAME 'bash -s'",
    "build-and-push": "cd ../.. && ./deploy/instance/local-scripts/build-and-push.sh",
    "sync": "source .env.remote && cd ../.. && ./deploy/instance/local-scripts/sync.sh",

    "remote-purge": "npm run exec-remote < ./remote-scripts/purge.sh",
    "remote-setup": "npm run exec-remote < ./remote-scripts/setup.sh",
    "remote-pull": "npm run exec-remote < ./remote-scripts/pull.sh",
    "remote-deploy": "npm run exec-remote < ./remote-scripts/deploy.sh",
    "remote-undeploy": "npm run exec-remote < ./remote-scripts/undeploy.sh",

    "full-deploy": "npm run remote-undeploy && npm run build-and-push && npm run remote-pull && npm run sync && npm run remote-deploy"
  }
}